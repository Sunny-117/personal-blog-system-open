{"version":3,"sources":["webpack:///./src/utils/formatDate.js","webpack:///./src/mixins/fetchCommentData.js","webpack:///./src/components/MessageArea/index.vue?ce1d","webpack:///./src/components/MessageArea/FormData.vue?24da","webpack:///./src/views/Message/index.vue?3aa8","webpack:///./src/components/MessageArea/index.vue","webpack:///./src/components/MessageArea/FormData.vue","webpack:///src/components/MessageArea/FormData.vue","webpack:///./src/components/MessageArea/FormData.vue?fa66","webpack:///./src/components/MessageArea/FormData.vue?e163","webpack:///./src/components/MessageArea/DataList.vue","webpack:///src/components/MessageArea/DataList.vue","webpack:///./src/components/MessageArea/DataList.vue?a9ed","webpack:///./src/components/MessageArea/DataList.vue?5798","webpack:///src/components/MessageArea/index.vue","webpack:///./src/components/MessageArea/index.vue?b610","webpack:///./src/components/MessageArea/index.vue?6bf9","webpack:///./src/views/Message/index.vue","webpack:///src/views/Message/index.vue","webpack:///./src/views/Message/index.vue?b01c","webpack:///./src/views/Message/index.vue?2fba","webpack:///./src/components/MessageArea/DataList.vue?560e","webpack:///./src/mixins/fetchData.js","webpack:///./src/mixins/mainScroll.js"],"names":["timeStamp","showTime","date","Date","months","getMonth","dates","getDate","hour","getHours","toString","padStart","minute","getMinutes","second","getSeconds","getFullYear","data","page","limit","created","this","$eventBus","$on","handleScrolls","destroyed","$off","computed","hasMore","rows","length","total","methods","isLoading","res","fetchData","concat","dom","range","disBottom","scrollHeight","clientHeight","scrollTop","fetchMoreData","render","_vm","_c","_self","staticClass","_g","$listeners","_v","_s","title","subTitle","attrs","list","directives","name","rawName","value","isListLoading","expression","staticRenderFns","ref","formData","nickname","domProps","on","$event","target","composing","$set","errorData","content","isSubmiting","preventDefault","handleClick","apply","arguments","showMessage","$emit","type","container","$refs","form","duration","component","_l","item","i","key","avatar","formatDate","createDate","components","Avatar","props","Array","default","FormData","DataList","String","Boolean","handleClicks","mixins","mainScroll","fetchCommentData","MessageArea","msgApi","callback","resp","unshift","defaultData","refValue","mounted","handleSetMainScroll","addEventListener","handleScroll","beforeDestroy","removeEventListener","top"],"mappings":"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","file":"js/chunk-666bbfae.421eb580.js","sourcesContent":["export default function(timeStamp, showTime = false) {\n    //格式化时间\n    const res = '';\n    const date = new Date(+timeStamp);\n    let months = date.getMonth() + 1;\n    if (months < 10) {\n        months = \"0\" + months;\n    }\n    let dates = date.getDate();\n    if (dates < 10) {\n        dates = \"0\" + dates;\n    }\n    if (showTime) {\n        let hour = date.getHours().toString().padStart(2, '0');\n        let minute = date.getMinutes().toString().padStart(2, '0');\n        let second = date.getSeconds().toString().padStart(2, '0');\n        return `${date.getFullYear()}-${months}-${dates} ${hour}:${minute}:${second}`;\n    }\n    return `${date.getFullYear()}-${months}-${dates}`;\n\n}","export default function() {\n    return {\n        data() {\n            return {\n                page: 1,\n                limit: 10,\n            }\n        },\n        created() {\n            this.$eventBus.$on('mainScroll', this.handleScrolls); //监听事件总线上的mainScroll事件，事件发生就执行handleScroll函数\n        },\n        destroyed() {\n            this.$eventBus.$off('mainScroll', this.handleScrolls);\n        },\n        computed: {\n            hasMore() {\n                return this.data.rows.length < this.data.total;\n            }\n        },\n        methods: {\n            async fetchMoreData() {\n                if (!this.hasMore) {\n                    return;\n                }\n                this.isLoading = true;\n                this.page++;\n                const res = await this.fetchData();\n                this.isLoading = false;\n                this.data.total = res.total;\n                this.data.rows = this.data.rows.concat(res.rows);\n            },\n            handleScrolls(dom) { //滚轮\n                if (this.isLoading || !dom) {\n                    return;\n                }\n                const range = 100;\n                const disBottom = dom.scrollHeight - dom.clientHeight - dom.scrollTop;\n                if (disBottom < range) {\n                    this.fetchMoreData();\n                }\n            }\n        }\n    }\n}","export * from \"-!../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/.pnpm/less-loader@5.0.0_less@3.13.1/node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1aab5cb8&prod&scoped=true&lang=less\"","export * from \"-!../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/.pnpm/less-loader@5.0.0_less@3.13.1/node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./FormData.vue?vue&type=style&index=0&id=6dc72968&prod&lang=less&scoped=true\"","export * from \"-!../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=63030065&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"message-area-container\"},[_c('FormData',_vm._g({},_vm.$listeners)),_c('h4',[_vm._v(_vm._s(_vm.title)),_c('span',[_vm._v(_vm._s(_vm.subTitle))])]),_c('DataList',{attrs:{\"list\":_vm.list}}),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isListLoading),expression:\"isListLoading\"}],staticClass:\"loading\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"form\",attrs:{\"id\":\"form-data-container\"}},[_c('form',{staticClass:\"form-data\"},[_c('div',{staticClass:\"input-area\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.nickname),expression:\"formData.nickname\"}],attrs:{\"maxlength\":\"10\",\"type\":\"text\",\"placeholder\":\"用户昵称\"},domProps:{\"value\":(_vm.formData.nickname)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.formData, \"nickname\", $event.target.value)}}}),_c('div',{staticClass:\"name-err\"},[_vm._v(_vm._s(_vm.errorData.nickname))]),_c('span',[_vm._v(_vm._s(_vm.formData.nickname.length)+\"/10\")])]),_c('div',{staticClass:\"comment-area\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.content),expression:\"formData.content\"}],attrs:{\"maxlength\":\"300\",\"placeholder\":\"输入内容\"},domProps:{\"value\":(_vm.formData.content)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.formData, \"content\", $event.target.value)}}}),_c('div',{staticClass:\"content-err\"},[_vm._v(_vm._s(_vm.errorData.content))]),_c('span',[_vm._v(_vm._s(_vm.formData.content.length)+\"/300\")])]),_c('button',{staticClass:\"submit\",attrs:{\"disabled\":_vm.isSubmiting},on:{\"click\":function($event){$event.preventDefault();return _vm.handleClick.apply(null, arguments)}}},[_vm._v(_vm._s(_vm.isSubmiting?\"提交中...\" :\"提交\"))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"form-data-container\" ref=\"form\">\n    <form class=\"form-data\">\n      <div class=\"input-area\">\n        <input v-model=\"formData.nickname\" maxlength=\"10\" type=\"text\" placeholder=\"用户昵称\" />\n        <div class=\"name-err\" >{{errorData.nickname}}</div>\n        <span>{{formData.nickname.length}}/10</span>\n      </div>\n      <div class=\"comment-area\">\n        <textarea  v-model=\"formData.content\" maxlength=\"300\" placeholder=\"输入内容\"></textarea>\n        <div class=\"content-err\">{{errorData.content}}</div>\n        <span>{{formData.content.length}}/300</span>\n      </div>\n      <button @click.prevent=\"handleClick\" class=\"submit\" :disabled=\"isSubmiting\">{{isSubmiting?\"提交中...\" :\"提交\"}}</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport showMessage from \"@/utils/showMessage\";\nexport default {\n  data() {\n    return {\n      formData: {\n        nickname: \"\",\n        content: \"\",\n      },\n      errorData: {\n        nickname: \"\",\n        content: \"\",\n      },\n      isSubmiting:false\n    };\n  },\n  methods:{\n    showMessage,\n    handleClick(){\n      this.errorData.nickname=this.formData.nickname?\"\":\"请输入昵称！\";\n      this.errorData.content=this.formData.content?\"\":\"请输入内容！\";\n      if (this.errorData.nickname || this.errorData.content) {\n        return ;\n      }\n      this.isSubmiting = true;\n      this.$emit('clicks', this.formData, (res)=>{\n        this.formData.nickname=\"\";\n        this.formData.content=\"\";\n        this.isSubmiting = false;\n        this.showMessage({\n          content:res,\n          type:'success',\n          container:this.$refs.form,\n          duration:800\n        })\n      })\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"~@/styles/color.less\";\n.input-area {\n  position: relative;\n  width: 400px;\n  margin-bottom: 10px;\n  input {\n    width: 400px;\n    border: 1px dashed @gray;\n    border-radius: 5px;\n    padding: 10px;\n    outline: none;\n    font-size: 14px;\n    box-sizing: border-box;\n  }\n  .name-err {\n    font-size: 14px;\n    color: #f30;\n    margin-top: 4px;\n  }\n  span {\n    position: absolute;\n    right: 4px;\n    bottom: 2px;\n    color: @gray;\n    font-size: 10px;\n  }\n}\n\n.comment-area {\n  position: relative;\n  width: 100%;\n  margin-bottom: 10px;\n  textarea {\n    width: 100%;\n    height: 150px;\n    border: 1px dashed @gray;\n    border-radius: 5px;\n    padding: 10px;\n    font-size: 14px;\n    box-sizing: border-box;\n    resize: none;\n    outline: none;\n  }\n  .content-err {\n    font-size: 14px;\n    color: #f30;\n    // margin-bottom: 8px ;\n  }\n  span {\n    position: absolute;\n    right: 4px;\n    bottom: 6px;\n    color: @gray;\n    font-size: 10px;\n  }\n}\n.submit {\n  width: 100px;\n  height: 35px;\n  border-radius: 5px;\n  background: darken(@primary,10%);\n  outline: none;\n  border: none;\n  color: @white;\n  cursor: pointer;\n  &:disabled{\n    background: darken(@primary, -10%);\n    cursor: not-allowed;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.3.0_942f6a24c1d9e8e2b1b2baff2a66c085/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./FormData.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.3.0_942f6a24c1d9e8e2b1b2baff2a66c085/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./FormData.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FormData.vue?vue&type=template&id=6dc72968&scoped=true\"\nimport script from \"./FormData.vue?vue&type=script&lang=js\"\nexport * from \"./FormData.vue?vue&type=script&lang=js\"\nimport style0 from \"./FormData.vue?vue&type=style&index=0&id=6dc72968&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6dc72968\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"form-list-container\"},_vm._l((_vm.list),function(item,i){return _c('li',{key:i},[_c('Avatar',{attrs:{\"url\":item.avatar,\"size\":44}}),_c('div',{staticClass:\"message\"},[_c('span',{staticClass:\"nick-name\"},[_vm._v(_vm._s(item.nickname))]),_c('p',{staticClass:\"comment-content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"date\"},[_c('span',[_vm._v(_vm._s(_vm.formatDate(item.createDate, true)))])])])],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ul class=\"form-list-container\">\n    <li v-for=\"(item, i) in list\" :key=\"i\">\n      <Avatar :url=\"item.avatar\" :size=\"44\"></Avatar>\n      <div class=\"message\">\n        <span class=\"nick-name\">{{ item.nickname }}</span>\n        <p class=\"comment-content\">\n          {{ item.content }}\n        </p>\n        <div class=\"date\">\n          <span>{{ formatDate(item.createDate, true) }}</span>\n        </div>\n      </div>\n    </li>\n  </ul>\n</template>\n\n<script>\nimport Avatar from \"@/components/Avatar\";\nimport formatDate from \"@/utils/formatDate\";\nexport default {\n  components: {\n    Avatar,\n  },\n  props: {\n    list: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  methods: {\n    formatDate,\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"~@/styles/color.less\";\nul {\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  li {\n    display: flex;\n    border-bottom: 1px solid darken(@gray, -18%);\n    padding: 10px 0;\n  }\n}\n.message {\n  margin-left: 15px;\n  flex: 1 1 auto;\n  position: relative;\n  .nick-name {\n    color: @success;\n  }\n  .comment-content {\n    margin: 8px 0;\n    font-size: 14px;\n    color: darken(@words, 20%);\n  }\n  .date {\n    position: absolute;\n    right: 0;\n    top: 5px;\n    font-size: 12px;\n    color: @gray;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.3.0_942f6a24c1d9e8e2b1b2baff2a66c085/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.3.0_942f6a24c1d9e8e2b1b2baff2a66c085/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DataList.vue?vue&type=template&id=e40b4dce&scoped=true\"\nimport script from \"./DataList.vue?vue&type=script&lang=js\"\nexport * from \"./DataList.vue?vue&type=script&lang=js\"\nimport style0 from \"./DataList.vue?vue&type=style&index=0&id=e40b4dce&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e40b4dce\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<div class=\"message-area-container\" >\n    <FormData v-on=\"$listeners\"></FormData>\n    <h4>{{title}}<span>{{subTitle}}</span></h4>\n    <DataList  :list=\"list\"></DataList>\n    <div class=\"loading\" v-loading=\"isListLoading\"></div>\n</div>\n</template>\n\n<script>\nimport FormData from \"./FormData\";\nimport DataList from \"./DataList\";\nexport default {\n    components:{\n        FormData,\n        DataList\n    },\n    props:{\n        title:{\n            type:String,\n            default:\"\"\n        },\n        subTitle:{\n            type:String,\n            default:\"\"\n        },\n        list:{\n            type:Array,\n            default:()=>[]\n        },\n        isListLoading:{\n            type:Boolean,\n            default:false\n        }\n    },\n}\n</script>\n\n<style scoped lang=\"less\">\n.loading{\n    height: 100px;\n    position: relative;\n}\n</style>","import mod from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.3.0_942f6a24c1d9e8e2b1b2baff2a66c085/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.3.0_942f6a24c1d9e8e2b1b2baff2a66c085/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1aab5cb8&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1aab5cb8&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1aab5cb8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"msgContainer\",staticClass:\"message-container\"},[_c('MessageArea',{attrs:{\"title\":\"留言板\",\"subTitle\":`(${_vm.data.total})`,\"list\":_vm.data.rows,\"isListLoading\":_vm.isLoading},on:{\"clicks\":_vm.handleClicks}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"message-container\" ref=\"msgContainer\">\n    <MessageArea\n      @clicks=\"handleClicks\"\n      title=\"留言板\"\n      :subTitle=\"`(${data.total})`\"\n      :list=\"data.rows\"\n      :isListLoading=\"isLoading\"\n    ></MessageArea>\n  </div>\n</template>\n\n<script>\nimport MessageArea from \"@/components/MessageArea\";\nimport fetchData from \"@/mixins/fetchData\";\nimport fetchCommentData from \"@/mixins/fetchCommentData\";\nimport * as msgApi from \"@/api/message\";\nimport mainScroll from \"@/mixins/mainScroll\";\nexport default {\n  mixins: [\n    mainScroll(\"msgContainer\"),\n    fetchData({ total: 0, rows: [] }),\n    fetchCommentData(),\n  ],\n  components: {\n    MessageArea,\n  },\n  methods: {\n    async fetchData() {\n      const res = await msgApi.getMessage(this.page, this.limit);\n      return res;\n    },\n    async handleClicks(formData, callback) {\n      const resp = await msgApi.postMessage(formData);\n      this.data.rows.unshift(resp);\n      this.data.total++;\n      callback(\"感谢您的留言\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.message-container {\n  width: 100%;\n  height: 100%;\n  padding: 25px 0;\n  box-sizing: border-box;\n  overflow-y: scroll;\n  scroll-behavior: smooth;\n  position: relative;\n}\n.message-area-container {\n  width: 800px;\n  margin: 0 auto;\n}\n</style>\n","import mod from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.3.0_942f6a24c1d9e8e2b1b2baff2a66c085/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.3.0_942f6a24c1d9e8e2b1b2baff2a66c085/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=63030065&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=63030065&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63030065\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/.pnpm/less-loader@5.0.0_less@3.13.1/node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.11.1_d02125917f7c66a571cdcbfa3dd68341/node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=style&index=0&id=e40b4dce&prod&lang=less&scoped=true\"","export default function(defaultData = null) {\n    return {\n        data() {\n            return {\n                isLoading: true,\n                data: defaultData\n            };\n        },\n        async created() {\n            this.data = await this.fetchData();\n            this.isLoading = false;\n        }\n    }\n};","export default function(refValue) {\n    return {\n        mounted() {\n            this.$eventBus.$on(\"setMainScroll\", this.handleSetMainScroll);\n            this.$refs[refValue].addEventListener(\"scroll\", this.handleScroll);\n        },\n        beforeDestroy() {\n            this.$eventBus.$emit(\"mainScroll\");\n            this.$eventBus.$off(\"setMainScroll\", this.handleSetMainScroll);\n            this.$refs[refValue].removeEventListener(\"scroll\", this.handleScroll);\n        },\n        methods: {\n            handleScroll() {\n                this.$eventBus.$emit(\"mainScroll\", this.$refs[refValue]);\n            },\n            handleSetMainScroll(top) {\n                this.$refs[refValue].scrollTop = top;\n            },\n        }\n    }\n}"],"sourceRoot":""}